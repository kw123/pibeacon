<?xml version="1.0"?>
<PluginConfig>

	<Field id="infoLabel1" type="label">
		<Label>RaspberryPi (rPi) Presence and Sensor plugin for Indigo              Developed by Karl Wachs </Label>
	</Field>

	<Field id="infoLabel01" type="label" fontColor="orange" >
<Label>This plugin can 
-Detect BLE beacons (on/off/ present), BLE signals from iphones, 
-BLE sensors (temp, hum, pressure, light, IR, accelleration..)
-Read various sensors through Serial, i2c, SPI, GPIO  on/off/touch sensors
  T,H,P,Light, RGB,IR,UV, Accel, Current, Voltage, Distance, Movements, switch positions, ... 
-Send commands to relays, analog DAC, Radio ....
-Send text, images, clocks, thermometers .. to attached displays (mini, full HDMI), LED chains </Label>
	</Field>


	<Field id="simpleSeparatorfoldernames" type="separator"/>

	<Field id="folderLabel" type="label" fontColor="green" >
		<Label>== Names for Indigo device/variables, general parameters </Label>
	</Field>

   	<Field    id="iBeaconFolderName"   type="textfield" >
		<Label>... DEVICES folder for NEW beacons:</Label>
	</Field>

	<Field id="iBeaconFolderNameLabel" type="label" alignWithControl="true" fontSize="small" fontColor="darkgrey">  
		<Label>Suggest to create a folder eg iBecons_Good and move newly created beacons into this folder to separate new and existing beacons easily</Label>
	</Field>

   	<Field    id="iBeaconFolderVariablesName"   type="textfield" >
		<Label>... VARIABLES folder for status etc:</Label>
	</Field>

	<Field    id="ibeaconNameDefault"   type="textfield" >
		<Label>...STATUS changed variables start w:</Label>
	</Field>

	<Field    id="SQLLoggingEnable"   type="menu"  >
		<Label>...Configure SQL logger for specific variables and devices (not) log</Label>
		<List>
			<Option value="on-on"   >log normal = log everything </Option>
			<Option value="off-on"  >disable devices/states -  enable variables</Option>
			<Option value="on-off"  >enable  devices/states - disable variables</Option>
			<Option value="off-off"	>disable devices/states - disable variables</Option>
		</List>    
	</Field>
	<Field id="SQLLoggingEnableLabel" type="label" alignWithControl="true" fontSize="small" fontColor="darkgrey">  
		<Label>This is only for: dev/states = Pi_x_Time etc, variables: pi_IN_xx. This saves SQL logger cpu and disk-space. There is no (good) reason to write them to the SQL logger</Label>
	</Field>

	<Field id="infoLabelCountVariables" type="label" fontColor="green" >
		<Label>== Variables populated with COUNTS of devices being home, present, online vs away, offline,..</Label>
	</Field>

	<Field    id="groupCountNameDefault"   type="textfield" >
		<Label>... COUNT variables names start w:</Label>
	</Field>

	<Field id="groupCountNameDefaultLabel" type="label" alignWithControl="true" fontSize="small" fontColor="darkgrey">  
		<Label>These variables count number of beacons-RPi-BLEconnect-sensors-... that are home/away /up/down present/.. 
Define the group names below: !! No spaces in names!! </Label>
	</Field>

	<Field    id="awayWhenNochangeInSeconds"   type="menu" default="600">
		<Label>... number of seconds w/o message to be counted as away/offline:</Label>
		<List>
			<Option value="20"         >20 secs for testing</Option>
			<Option value="60"         >60 secs</Option>
			<Option value="90"         >90 secs</Option>
			<Option value="120"        >2 minutes</Option>
			<Option value="180"        >3 minutes</Option>
			<Option value="240"        >4 minutes</Option>
			<Option value="300"        >5 minutes</Option>
			<Option value="360"        >6 minutes</Option>
			<Option value="420"        >7 minutes</Option>
			<Option value="480"        >8 minutes</Option>
			<Option value="540"        >9 minutes</Option>
			<Option value="600"        >10 minutes (default)</Option>
			<Option value="900"        >15 minutes</Option>
			<Option value="1200"       >20 minutes</Option>
			<Option value="1600"       >30 minutes</Option>
			<Option value="2500"       >45 minutes</Option>
			<Option value="3600"       >1 hour</Option>
			<Option value="7200"       >2 hours</Option>
			<Option value="21600"      >6 hours</Option>
			<Option value="43200"      >12 hours</Option>
			<Option value="86400"      >1 day</Option>
		</List>
	</Field>
	<Field id="awayWhenNochangeInSecondsLabel" type="label" alignWithControl="true" fontSize="small" fontColor="darkgrey">  
		<Label>for sensors ONLY: they do not have state up/down, but temperature, humidity, ...</Label>
	</Field>

	<Field    id="groupName0"   type="textfield" >
		<Label>... name for COUNT-Group1(def Family):</Label>
	</Field>


	<Field    id="groupName1"   type="textfield" >
		<Label>... name for COUNT-Group2(def Guests):</Label>
	</Field>


	<Field    id="groupName2"   type="textfield" >
		<Label>... name for COUNT-Group3(def Other1):</Label>
	</Field>


	<Field    id="groupName3"   type="textfield" >
		<Label>... name for COUNT-Group4(def Other2):</Label>
	</Field>


	<Field    id="groupName4"   type="textfield" >
		<Label>... name for COUNT-Group5(def Other3):</Label>
	</Field>

	<Field    id="groupName5"   type="textfield" >
		<Label>... name for COUNT-Group6(def Other4):</Label>
	</Field>

	<Field    id="groupName6"   type="textfield" >
		<Label>... name for COUNT-Group7(def Other5):</Label>
	</Field>

	<Field id="groupNameLabel" type="label" alignWithControl="true" fontSize="small" fontColor="darkgrey">  
		<Label>The groups names will be used for variables and track /count totals of up / down  home / away states for all group members
When you leave the name empty the variable will not be used / created, 
They will also only be crated when needed ie when a groups has any members
You need to put a device (RPI,beacon,BLEconnect,Sensor, BLE, etc) into one of these groups in device edit to make it part of one of these groups, ie to be counted
This can be used to check if eg all familiy members are home/away or all rpi devices are on or one is down = away
This is not used for trigger names they will continue to be called Family, Guests, Other1, Other2, Other3 as their names can not be changed dynamically
All BEACONS, RPI, BLEconnect, and SENSORS device types have predefined groups and are members of them, so that you can see eg how many BEACONS are home/ away </Label>
	</Field>




	<Field id="simpleSeparator22" type="separator"/>

	<Field id="infoLabel22" type="label" fontColor="green" >
		<Label>== Parameters for iBeacons, might be overwritten for individual ibeacons</Label>
	</Field>

	<Field    id="secToDown"   type="menu"  tooltip="this is the default value, can be overwritten in each device edit">
		<Label>Status goes from UP to DOWN  if no signal in:</Label>
		<List>
			<Option value="30"  > 30 Seconds</Option>
			<Option value="45"  > 45 Seconds</Option>
			<Option value="60"  > 60 Seconds</Option>
			<Option value="65"  > 65 Seconds</Option>
			<Option value="70"  > 70 Seconds</Option>
			<Option value="80"  > 80 Seconds</Option>
			<Option value="90"  > 90 Seconds</Option>
			<Option value="95"  > 95 Seconds</Option>
			<Option value="100" >100 Seconds</Option>
			<Option value="110" >110 Seconds</Option>
			<Option value="120" >  2 Minutes </Option>
			<Option value="180" >  3 Minutes </Option>
		</List>
	</Field>

	<Field    id="setClostestRPItextToBlank"   type="menu"  >
		<Label>set clostestRPItext(dev-State) to blank when iBeacon down:</Label>
		<List>
			<Option value="1" >keep last RPi device name</Option>
			<Option value="0" >set to blank </Option>
		</List>
	</Field>

   	<Field    id="sendFullUUID"   type="menu" tooltip="short messages reduces message size by 50%">
		<Label>RPi to send full UUID in every message or only every 10ths:</Label>
		<List>
<!--			<Option value="0" >short (x-x-x), only every 10th full UUID</Option> -->
			<Option value="1" >always long , full UUID</Option>
		</List>
	</Field>
	<Field id="sendFullUUIDLabel" type="label" alignWithControl="true" fontSize="small" fontColor="darkgrey">  
		<Label>in stable operations the UUID information is not needed(it does not change), this will cut the size of the message in half</Label>
	</Field>


	<Field    id="removeJunkBeacons"   type="menu"  tooltip="enable or disable the deletion of new beacons after more than one hour if not renamed">
		<Label>Delete NEW Beacons if not renamed:</Label>
		<List>
			<Option value="0" >keep</Option>
			<Option value="1" >delete</Option>
		</List>
	</Field>

	<Field id="removeJunkBeaconsLabel" type="label" alignWithControl="true" fontSize="small" fontColor="darkgrey">  
		<Label>if you have accept new beacons on and get flooded with new beacons, this option will allow to delete them if you have not renamed them from the default name after one hour</Label>
	</Field>

	<Field id="checkBeaconParametersDisabled" type="checkbox"      > 
		<Label>Disable checking beacon battery level for all beacons:</Label>
	</Field>


	<Field id="simpleSeparator33" type="separator"/>

	<Field id="infoLabel33" type="label" fontColor="green" >
		<Label>== Parameters for ALL rPi / plugin</Label>
	</Field>

	<Field    id="myIpNumber"   type="textfield" >
		<Label>IP Number of indigo MAC server:</Label>
	</Field>

	<Field id="myIpNumberLabel" type="label" alignWithControl="true" fontSize="small" fontColor="darkgrey">  
		<Label>This information will be send to the RPI, then used by the RPI to connect to the indigo server
with indigo 2022 it ist strongly recommened NOT to use std indigo webserver anymore. use the direct socket option</Label>
	</Field>

	<Field id="IndigoOrSocket"   type="menu"  tooltip="web server wil go through curl to std indigo webserver, then update variables which will be read by plugin to update deviece states.
Socket communication will go directly through socket communication to plugin that updates the device states etc." >
		<List>
			<Option value="indigo" >use indigo std web server - not recommended deprecating</Option>
			<Option value="socket" >use direct socket communication </Option>
		</List>    
		<Label>use RPI to indigo comm: web server(deprecating) or through socket(recommended):</Label> 
	</Field>

	<Field id="portOfServer"   type="textfield"  visibleBindingId="IndigoOrSocket" visibleBindingValue="indigo" >
		<Label>define IP-PORT of default Indigo web server (RPI to Indigo 8176):</Label> 
	</Field>

	<Field id="indigoInputPORT"   type="textfield"   visibleBindingId="IndigoOrSocket" visibleBindingValue="socket" >
		<Label>define IP-PORT for socket communication (RPI to Indigo):</Label> 
	</Field>

	<Field    id="checkRPIipForReject"   type="checkbox"  visibleBindingId="IndigoOrSocket" visibleBindingValue="socket" >
		<Label>Check if ip used by rpi is registered (set to off if rpi is in subnet):</Label>
	</Field>

	<Field    id="blockNonLocalIp"   type="checkbox"  visibleBindingId="IndigoOrSocket" visibleBindingValue="socket" >
		<Label>Accept only local ip numbers to contact MAC:</Label>
	</Field>

	<Field id="blockNonLocalIpLabel" type="label" alignWithControl="true" fontSize="small" fontColor="darkgrey">  
		<Label>when enabled any ip number != the first 2 octets of the MAC ip address will be ignored</Label>
	</Field>

	<Field id="maxSocksErrorTime"   type="menu"  tooltip="if socket communication has issues ie short or incomplete packages this parameter 
allows to set a threshold on when to report. Eg if set to 10: if 2 events happen within 10 minutes it is reported, otherwise not" 
             visibleBindingId="IndigoOrSocket" visibleBindingValue="socket" >
		<Label>Report on bad data received if time between bad msgs less xx minutes:</Label> 
    	<List>
			<Option value="0"    >error reporting off</Option>
			<Option value="30"   >30 secs </Option>
			<Option value="60"   >1 minute </Option>
			<Option value="300"  >5 minute </Option>
			<Option value="600"  >10 minute </Option>
			<Option value="1200" >20 minute </Option>
			<Option value="3600" >1 hour </Option>
		</List>    
	</Field>

	<Field id="compressRPItoPlugin"   type="menu"  defualtValue="20000" visibleBindingId="IndigoOrSocket" visibleBindingValue="socket" >
		<List>
			<Option value="10000"   >msg GT 10 KB </Option>
			<Option value="20000"   >msg GT 20 KB </Option>
			<Option value="40000"   >msg GT 40 KB </Option>
		</List>    
		<Label>Compress large messages from RPI to plugin (only for socket comm):</Label> 
	</Field>

	<Field id="compressRPItoPluginLabel" type="label" alignWithControl="true" fontSize="small" fontColor="darkgrey">  
		<Label>use if you have a slow connection ie wifi and large packages don't come through, can be set for each individual RPI in device edit</Label>
	</Field>

	<Field id="authentication"   type="menu"  visibleBindingId="IndigoOrSocket" visibleBindingValue="indigo"  tooltip="default for indigo is digest,  PI server need this to send msg to indigo webbserver" >
		<List>
			<Option value="digest" >use DIGEST  </Option>
			<Option value="basic"  >use BASIC </Option>
			<Option value="bearer" >use Bearer only with py3 on RPI</Option>
			<Option value="none"   >use do not use security ie no userid or password </Option>
		</List>    
		<Label>indigo web access authentication:</Label> 
	</Field>


	<Field id="apiKey"   type="textfield"  visibleBindingId="authentication" visibleBindingValue="bearer">
		<Label>api key for http access to indigo:</Label> 
	</Field>

   
	<Field id="userIdOfServer"   type="textfield"  visibleBindingId="authentication" visibleBindingValue="digest" tooltip="only used for http restful connection RPI to indigo" >
		<Label>userid for indigo server (webserver):</Label> 
	</Field>
   
	<Field id="passwordOfServer"   type="textfield"  visibleBindingId="authentication" visibleBindingValue="digest" tooltip="only used for http restful connection RPI to indigo"  >
		<Label>password for indigo (webserver):</Label> 
	</Field>


	<Field id="simpleSeparator44" type="separator"/>
	<Field id="infoLabel44" type="label" fontColor="green">
		<Label>== EXPERT parameters for rPi server configurations, will be send to all rPi server</Label>
	</Field>

	<Field    id="rebootIfNoMessagesSeconds"   type="menu" tooltip="if no ibeacon messages reboot, BUT if you have only one RPI it might not receive an iBeacon signals as it does not see any other RPI tahts end iBeacon signals..">
		<Label>reboot RPI if GT x minutes w NO iBeacon messages (on RPI):</Label>
		<List>
			<Option value="60"    >reboot after 1 minute  w no ibeacon signal </Option>
			<Option value="120"   >reboot after 2 minutes w no ibeacon signal </Option>
			<Option value="240"   >reboot after 4 minutes w no ibeacon signal </Option>
			<Option value="99999999999999"  >do NOT reboot, just wait </Option>
		</List>
	</Field>

	<Field id="rebootIfNoMessagesSecondsLabel" type="label" alignWithControl="true" fontSize="small" fontColor="darkgrey">  
		<Label>use if you experience instability, if you have just rpi and no beacon is home and no road near do not set to reboot</Label>
	</Field>


	<Field    id="enableRebootRPIifNoMessages"   type="menu" tooltip="if too many empty messages received in a row it is an indication that the BLE stack is not working">
		<Label>reboot RPI if GT xx EMPTY beacon messages received (from plugin):</Label>
		<List>
			<Option value="1"   > 1  for testing</Option>
			<Option value="5"   > 5  </Option>
			<Option value="10"  > 10 </Option>
			<Option value="20"  > 20 </Option>
			<Option value="50"  > 50 </Option>
			<Option value="100" > 100 </Option>
			<Option value="999999999"  > disable </Option>
		</List>    
	</Field>

	<Field id="enableRebootRPIifNoMessagesLabel" type="label" alignWithControl="true" fontSize="small" fontColor="darkgrey">  
		<Label>after xx seconds the plugin will connect to RPI and reboot</Label>
	</Field>


	<Field id="infoLabel45" type="label" fontSize="small" >
		<Label>- Setup Wifi(wlan0) vs cable (eth0)
    on/off: ON/On if other off/off/do not change
    use IP: which IP# to send to Indigo to ID raspberry
    if you have both ON the RPI might send packages to indigo from 2 different IP numbers
    if you have eg wifi off and no ethernet connection it will try with wifi ON
    is overwritten in RPI device edit</Label>
	</Field>

	<Field    id="eth0"   type="menu"  >
		<Label>ethernet cable(eth0) active:</Label>
		<List>
					<Option value='{"on":"on", "useIP":"use"}'				>ON,  use eth0 IP# default </Option>
					<Option value='{"on":"on", "useIP":"useIf"}'			>ON,  use eth0 IP# if wlan0 not used</Option>
					<Option value='{"on":"on", "useIP":"doNotUse"}'			>ON,  do not use eth0 IP# </Option>
					<Option value='{"on":"onIf", "useIP":"useIf"}'			>ON if wlan0 off,  use eth0 IP# if wlan0 not used</Option>
					<Option value='{"on":"off", "useIP":"doNotUse"}'		>off  </Option>
					<Option value='{"on":"dontChange","useIP":"use"}'		>do not change , must be set by user, use eth0 IP</Option>
					<Option value='{"on":"dontChange","useIP":"useIf"}'		>do not change , must be set by user, use eth0 IP if wlan0 not used</Option>
					<Option value='{"on":"dontChange","useIP":"doNotUse"}'	>do not change , must be set by user, do not use eth0 IP#</Option>
		</List> 
	</Field>

	<Field    id="wlan0"   type="menu" >
		<Label>WiFi(wlan0) active:</Label>
		<List>
					<Option value='{"on":"on", "useIP":"use"}'				>ON,  use wlan0 IP# </Option>
					<Option value='{"on":"on", "useIP":"useIf"}'			>ON,  use wlan0 IP# if eth0 not used</Option>
					<Option value='{"on":"on", "useIP":"doNotUse"}'			>ON,  do not use wlan0 IP# </Option>
					<Option value='{"on":"onIf", "useIP":"useIf"}'			>ON if eth0 off,  use wlan0 IP# if eth0 not used</Option>
					<Option value='{"on":"off", "useIP":"doNotUse"}'		>off  </Option>
					<Option value='{"on":"dontChange", "useIP":"use"}'		>do not change , must be set by user, use wlan0 IP# default</Option>
					<Option value='{"on":"dontChange", "useIP":"useIf"}'	>do not change , must be set by user, use wlan0 IP# if eth0 not used</Option>
		</List> 
	</Field>
	<Field id="infoLabel45Other" type="label" fontSize="small" >
		<Label>- other RPI settings</Label>
	</Field>

	<Field    id="piUpdateWindow"   type="menu" >
		<Label>Update indigo states of rPi devices :</Label>
		<List>
			<Option value="0"    >like other beacons </Option>
			<Option value="320"  >every 5 minutes</Option>
		</List>    
	</Field>



	<Field    id="rPiCommandPORT"   type="textfield" tooltip="port on RPI to receive commands from the plugin" >
		<Label>rPi PORT to receive GPIO commands (0=off):</Label>
	</Field>

	<Field id="rebootHour"   type="menu"  tooltip="this is an OR with the above option" >
		<Label>Should the rPi systems reboot themselves after midnight:</Label>
		<List>
			<Option value="0"   >at 0:00, midnight</Option>
			<Option value="1"   >at 1:00 am  (default)</Option>
			<Option value="2"   >at 2:00 am </Option>
			<Option value="3"   >at 3:00 am </Option>
			<Option value="4"   >at 4:00 am </Option>
			<Option value="22"  >at 22:00  </Option>
			<Option value="23"  >at 23:00  </Option>
			<Option value="-1"  >do not use this feature</Option>
		</List>
	</Field>

	<Field id="expectTimeout"   type="menu"  tooltip="used in expect when loggin into rPi " >
		<Label>Timeout for sending fields to rPi:</Label>
		<List>
			<Option value="5"    > 5 seconds</Option>
			<Option value="10"   >10 seconds</Option>
			<Option value="15"   >15 seconds (default)</Option>
			<Option value="20"   >20 seconds</Option>
			<Option value="30"   >30 seconds (slow connection)</Option>
		</List>
	</Field>


	<Field id="restartBLEifNoConnect"   type = "menu"  tooltip="BLEconnect will request a BLE stack restart from beaconloop if no messages in 5/10 .. minutes" >
		<Label>Should BLEconnect do a restart of the BLE stack if no responses:</Label>
		<List>
			<Option value="0"   >no</Option>
			<Option value="1"   >yes</Option>
		</List>
	</Field>

	<Field id="rebootWatchDogTime"   type = "menu"  tooltip="callbeacon.py (main program) will launch a 'shutdown -r x' command, if not killed by the main program it will reboot the rPi. after x minutes" >
		<Label>rebootWatchDog timer function for rPi:</Label>
		<List>
			<Option value="-1"  >off (default)</Option>
			<Option value="1"   >after 1 minutes</Option>
			<Option value="2"   >after 2 minutes</Option>
			<Option value="3"   >after 3 minutes</Option>
			<Option value="4"   >after 4 minutes</Option>
			<Option value="5"   >after 5 minutes</Option>
			<Option value="6"   >after 6 minutes</Option>
		</List>
	</Field>

	<Field id="GPIOpwm"   type = "menu"  tooltip="pulse width modulation, 100 Hz ok , max ~ 300 HZ" >
		<Label>Pulse Width Modulation for analogWrite of GPIO:</Label>
		<List>
			<Option value="1"   > 100 Hz</Option>
			<Option value="2"   > 200 Hz</Option>
			<Option value="3"   > 300 Hz</Option>
		</List>
	</Field>

	<Field    id="rpiDataAcquistionMethod"   type="menu"  tooltip="can be overwriten for each individual RPi in rpi device edit">
		<Label>Use which method on RPIs for beacon scanning read:</Label>
		<List>
			<Option value="hcidump" > using hcidump and lescan, has more functions</Option>
			<Option value="socket"  > using python socket reading (old method)</Option>
		</List>
	</Field>

	<Field id="simpleSeparatorSensors" type="separator"/>

	<Field id="SensorsLabel" type="label" fontColor="green" >
	  <Label>== Sensor parameters, units etc </Label>	</Field>

	<Field    id="tempUnits"   type="menu" >
		<Label>Temperature displayed in:</Label>
		<List>
			<Option value="Celsius"    >Celsius </Option>
			<Option value="Fahrenheit" >Fahrenheit</Option>
			<Option value="Kelvin"     >Kelvin</Option>
		</List>
	</Field>

	<Field    id="tempDigits"   type="menu" >
		<Label>Temperature digits to show and store:</Label>
		<List>
			<Option value="0" >0 </Option>
			<Option value="1" >1</Option>
			<Option value="2" >2</Option>
		</List>
	</Field>

	<Field    id="distanceUnits"   type="menu" >
		<Label>distance measured in:</Label>
		<List>
			<Option value="1.0"     >meter</Option>
			<Option value="0.01"    >cm</Option>
			<Option value="0.0254"  >inches</Option>
			<Option value="0.348"   >feet</Option>
			<Option value="0.9144"  >yard</Option>
		</List>
	</Field>

	<Field    id="speedUnits"   type="menu" >
		<Label>speed measured in:</Label>
		<List>
			<Option value="1.0"      >meter/s</Option>
			<Option value="0.01"     >cm/s</Option>
			<Option value="0.0254"   >inches/s</Option>
			<Option value="0.348"    >feet/s</Option>
			<Option value="0.9144"   >yard/s</Option>
			<Option value="3.6"      >km/h</Option>
			<Option value="2.2369356">m/h</Option>
		</List>
	</Field>

	<Field    id="pressureUnits"   type="menu" >
		<Label>Pressure displayed in:</Label>
		<List>
			<Option value="Pascal"    >Pascal </Option>
			<Option value="hPascal"   >Hecto Pascal (Pa/100)</Option>
			<Option value="bar"       >Bar       (Pa*0.00001)</Option>
			<Option value="mBar"      >mBar      (Pa*0.01)</Option>
			<Option value="atm"       >atm       (Pa*0.000009869233)</Option>
			<Option value="inches"    >inches Hg (Pa*0.000295299802)</Option>
			<Option value="mm"        >mm Hg     (Pa*0.00750063)</Option>
			<Option value="Torr"      >Torr      (Pa*0.00750063)</Option>
			<Option value="PSI"       >PSI       (Pa*0.00014503779906556894)</Option>

		</List>
	</Field>

	<Field    id="rainUnits"   type="menu" >
		<Label>Rain values displayed in (rain-rate is in units/hour):</Label>
		<List>
			<Option value="inch"  >inches </Option>
			<Option value="mm"    >mm</Option>
			<Option value="cm"    >cm</Option>
		</List>
	</Field>

	<Field    id="rainDigits"   type="menu" >
		<Label>Rain values digits to show:</Label>
		<List>
			<Option value="0" >0 </Option>
			<Option value="1" >1</Option>
			<Option value="2" >2</Option>
			<Option value="3" >3</Option>
		</List>
	</Field>

	<Field    id="lightningTimeWindow"   type="menu"  tooltip=" set variable lightningEventDate / lightningEventDevices  if maore than 1 device fires in time window">
		<Label>Time window for lightning devices:</Label>
		<List>
			<Option value="2"  >  2 secs  for testing</Option>
			<Option value="3"  >  3 secs </Option>
			<Option value="5"  >  5 secs </Option>
			<Option value="7"  >  7 secs </Option>
			<Option value="10" > 10 secs </Option>
			<Option value="15" > 15 secs </Option>
			<Option value="20" > 20 secs </Option>
			<Option value="30" > 30 secs </Option>
			<Option value="60" > 60 secs </Option>
			<Option value="90" > 90 secs </Option>
			<Option value="120"> 2 minutes - for testing</Option>
			<Option value="180"> 3 minutes - for testing</Option>
			<Option value="240"> 4 minutes - for testing</Option>
			<Option value="300"> 5 minutes - for testing</Option>
			<Option value="600">10 minutes - for testing</Option>
			<Option value="999999999" >time window = infinit - for testing</Option>
		</List>
	</Field>

	<Field    id="lightningNumerOfSensors"   type="menu"  tooltip=" set variable lightningEventDate / lightningEventDevices  if maore than 1 device fires in time window">
		<Label>How many Lightning sensor have to fire to set variable:</Label>
		<List>
			<Option value="1"  > 1 sensor  in time window</Option>
			<Option value="2"  > 2 sensors in time window</Option>
			<Option value="3"  > 3 sensors in time window</Option>
			<Option value="4"  > 4 sensors in time window</Option>
		</List>
	</Field>

	<Field    id="execcommandsListAction"   type="menu" defaultValue="delete" >
		<Label>reload last OUTPUT states at boot time on rpi:</Label>
		<List>
			<Option value="delete"	>ignore at boot  </Option>
			<Option value="keep"	>keep and set values</Option>
		</List>
	</Field>



	<Field id="simpleSeparatorplotbeacons" type="separator"/>

	<Field id="posLabel" type="label" fontColor="green" >  
		<Label>== Create png file of x,y,z positions of iBeacons</Label>	</Field>
    
	<Field    id="beaconPositionsUpdateTime"   type="menu"  >
		<Label>...enable iBeacon position Plot:</Label>
		<List>
			<Option value="-1" >do not enable</Option>
			<Option value="30" > 30 secs  update  for testing </Option>
			<Option value="60" > 1 minute  update</Option>
			<Option value="120"> 2 minutes update</Option>
			<Option value="300"> 5 minutes update</Option>
			<Option value="600">10 minutes update</Option>
		</List>
	</Field>

	<Field id="posLabel2" type="label" visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600" fontSize="small" >  
		<Label>        This will create a png file with the positions of the selected iBeacons (in beacon device edit)
        =you can supply a "background.png" image in either  
          1. check: ".../Indigo x.y/Preferences/Plugins/com.karlwachs.piBeacon/plotPositions/"
          2. check: "/output image path/"  set below
        =the y image size is used to position the ibeacon, the X image size is assumed to be ydots * xscale/yscale
        =the x,y scale number should be measured in your distance units eg 20 by 30 feet/ meter ..
        =the xzy positions of the RPIs must be accurate as well as the TX power parameter of the iBeacons
        =The position calculation is a simple interpolation starting with the highest RPI signal + second highest. 
              Beacon device edit has an option to size the markers with the position distance to the closest RPI</Label>
	</Field>

	<Field    id="beaconPositionsdeltaDistanceMinForImage"   type="menu"  visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600">
		<Label>...update position if an ibeacon moved by:</Label>
		<List>
			<Option value="0" > any change</Option>
			<Option value="1" > 1 distance unit</Option>
			<Option value="2" > 2 distance units</Option>
			<Option value="3" > 3 distance units</Option>
			<Option value="4" > 4 distance units</Option>
			<Option value="5" > 5 distance units</Option>
			<Option value="6" > 6 distance units</Option>
			<Option value="7" > 7 distance units</Option>
			<Option value="8" > 8 distance units</Option>
			<Option value="9" > 9 distance units</Option>
			<Option value="10"> 10 distance units</Option>
			<Option value="15"> 15 distance units</Option>
			<Option value="20"> 20 distance units</Option>
			<Option value="30"> 30 distance units</Option>
			<Option value="40"> 40 distance units</Option>
		</List>
	</Field>

	<Field    id="beaconPositionsimageXscale"   type="textfield" visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600">           
		<Label>X scale:</Label>
	</Field>

	<Field    id="beaconPositionsimageYscale"   type="textfield"  visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600">           
		<Label>Y scale:</Label>
	</Field>

	<Field    id="beaconPositionsimageZlevels"   type="textfield"  visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600">           
		<Label>z levels:</Label>
	</Field>

	<Field id="posLabelZlevel" type="label" visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600" alignWithControl="true" fontSize="small" fontColor="darkgrey">  
		<Label>is used to set the heights / levels (z-coordinate) of your floors; enter one number for each floor eg 0,5,10,15 for 4 floors, then use THESE z levels in RPI device edit for the x,y,z position of the RPI. In the image the beacons on different floors are shown with differnet hatches ( blank, //, \\ ,+)</Label> 
	</Field>


	<Field    id="beaconPositionsimageDotsY"     type="textfield" visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600">       
		<Label>Image size = # of y-dots:</Label>
	</Field>


	<Field    id="beaconPositionsimageOutfile"  type="textfield"  visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600"
		tooltip="completePath and filename " >               
		<Label>Output image path/filename:</Label></Field>

	<Field id="beaconPositionsimageShowRPIs" type="menu"      visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600"> 
		<Label>Show RPIs in plot:</Label>
		<List>
			<Option value="0"       > no</Option>
			<Option value="square"  > as square w label R-x</Option>
			<Option value="text"    > R-x</Option>
		</List>
	</Field>

	<Field id="beaconShowExpiredBeacons" type="menu"       visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600"> 
		<Label>Show expired beacons in plot:</Label>
		<List>
			<Option value="0"  > no</Option>
			<Option value="1"  > yes</Option>
		</List>
	</Field>

	<Field id="beaconRandomBeacons" type="menu"       visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600"> 
		<Label>randomize beacon position a little (if they all overlap):</Label>
		<List>
			<Option value="0"   > no</Option>
			<Option value="10"  > 10%</Option>
			<Option value="20"  > 20%</Option>
			<Option value="30"  > 30%</Option>
			<Option value="40"  > 40%</Option>
		</List>
	</Field>


	<Field id="beaconSymbolSize" type="menu"       visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600"> 
		<Label>Multiply size of symbols:</Label>
		<List>
			<Option value="0.3"  >0.3</Option>
			<Option value="0.4"  >0.4</Option>
			<Option value="0.5"  >0.5</Option>
			<Option value="0.6"  >0.6</Option>
			<Option value="0.7"  >0.7</Option>
			<Option value="0.8"  >0.8</Option>
			<Option value="0.9"  >0.9</Option>
			<Option value="1.0"  >1.0 default</Option>
			<Option value="1.1"  >1.1</Option>
			<Option value="1.2"  >1.2</Option>
			<Option value="1.4"  >1.4</Option>
			<Option value="1.6"  >1.6</Option>
			<Option value="1.8"  >1.8</Option>
			<Option value="2.0"  >2.0</Option>
			<Option value="2.5"  >2.5</Option>
			<Option value="3.0"  >3.0</Option>
		</List>
	</Field>

	<Field id="beaconLargeCircleSize" type="menu"       visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600"> 
		<Label>Multiply size of large Circle symbol:</Label>
		<List>
			<Option value="0.3"  >0.3</Option>
			<Option value="0.4"  >0.4</Option>
			<Option value="0.5"  >0.5</Option>
			<Option value="0.6"  >0.6</Option>
			<Option value="0.7"  >0.7</Option>
			<Option value="0.8"  >0.8</Option>
			<Option value="0.9"  >0.9</Option>
			<Option value="1.0"  >1.0 default</Option>
			<Option value="1.1"  >1.1</Option>
			<Option value="1.2"  >1.2</Option>
			<Option value="1.4"  >1.4</Option>
			<Option value="1.6"  >1.6</Option>
			<Option value="1.8"  >1.8</Option>
			<Option value="2.0"  >2.0</Option>
			<Option value="2.5"  >2.5</Option>
			<Option value="3.0"  >3.0</Option>
		</List>
	</Field>

	<Field id="beaconPositionsimageShowCaption" type="menu"       visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600"> 
		<Label>Show caption:</Label>
		<List>
			<Option value="0"  > do not show caption</Option>
			<Option value="1"  > at top</Option>
			<Option value="-1" > at bottom</Option>
		</List>
	</Field>

	<Field id="beaconPositionsShowTimeStamp" type="menu"       visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600"> 
		<Label>Show time stamp:</Label>
		<List>
			<Option value="0"  > no</Option>
			<Option value="1"  > yes</Option>
		</List>
	</Field>

	<Field    id="beaconPositionsTitleText"     type="textfield"  visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600">   
		<Label>Title text:</Label>
	</Field>

	<Field    id="beaconPositionsTitleTextPos"  type="textfield" visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600">           
		<Label>Title text Pos:</Label>
	</Field>

	<Field id="beaconPositionsTitleTextRotation" type="menu"       visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600"> 
		<Label>Title text rotation:</Label>
		<List>
			<Option value="0"  > left to right</Option>
			<Option value="90" > bottom up(requires an offset to the y position!)</Option>
		</List>
	</Field>

	<Field id="beaconPositionsTitleTextColor" type="menu"       visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600"> 
		<Label>Title Text color:</Label>
		<List>
			<Option value="#FF0000" >red</Option>
			<Option value="#00FF00" >green</Option>
			<Option value="#0000FF" >blue</Option>
			<Option value="#FFFF00" >yellow</Option>
			<Option value="#FF00FF" >mangan</Option>
			<Option value="#00FFFF" >cyan</Option>
			<Option value="#FFFFFF" >white</Option>
			<Option value="#0F0F0F" >grey</Option>
			<Option value="#000000" >black</Option>
		</List>
	</Field>

	<Field id="beaconPositionsTitleTextSize" type="menu"       visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600"> 
		<Label>Title text size [pts]:</Label>
		<List>
			<Option value="6"  >6</Option>
			<Option value="8"  >8</Option>
			<Option value="10" >10</Option>
			<Option value="12" >12</Option>
			<Option value="14" >14</Option>
			<Option value="16" >16</Option>
			<Option value="18" >18</Option>
			<Option value="20" >20</Option>
			<Option value="24" >24</Option>
			<Option value="30" >30</Option>
			<Option value="40" >40</Option>
			<Option value="50" >50</Option>
		</List>
	</Field>




	<Field id="beaconPositionsCaptionTextSize" type="menu"     visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600"> 
		<Label>Caption text size [pts]:</Label>
		<List>
			<Option value="6"  >6</Option>
			<Option value="8"  >8</Option>
			<Option value="10" >10</Option>
			<Option value="12" >12</Option>
			<Option value="14" >14</Option>
			<Option value="16" >16</Option>
			<Option value="18" >18</Option>
			<Option value="20" >20</Option>
			<Option value="24" >24</Option>
			<Option value="30" >30</Option>
			<Option value="40" >40</Option>
			<Option value="50" >50</Option>
		</List>
	</Field>

	<Field    id="beaconPositionsLabelTextSize"     type="menu"  visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600">       
		<Label>Label text size  [pts]:</Label>
		<List>
			<Option value="6"  >6</Option>
			<Option value="8"  >8</Option>
			<Option value="10" >10</Option>
			<Option value="12" >12</Option>
			<Option value="14" >14</Option>
			<Option value="16" >16</Option>
			<Option value="18" >18</Option>
			<Option value="20" >20</Option>
			<Option value="24" >24</Option>
			<Option value="30" >30</Option>
			<Option value="40" >40</Option>
			<Option value="50" >50</Option>
		</List>
	</Field>

	<Field    id="beaconPositionstextPosLargeCircle"     type="menu"  visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600">       
		<Label>Label pos for LARGE circles:</Label>
		<List>
			<Option value="atCenter"  >at center of circle</Option>
			<Option value="atRadius"  >at right of circle</Option>
 	  	</List>
	</Field>

	<Field id="beaconPositionsimageCompress" type="checkbox" visibleBindingId="beaconPositionsUpdateTime" visibleBindingValue="30,60,120,300,600"> 
		<Label>compress png File:</Label>
	</Field>


	<Field id="simpleSeparatorpy3" type="separator"/>
		<Field id="py3"         type="label" fontColor="green" >
			<Label>== python version on rpi:...</Label>
		</Field>

		<Field    id="usePython3"   type="menu" defaultValue="0" >
			<Label>Use python3 where ever possible:</Label>
			<List>
				<Option value="0"		>use setting in rPi device edit </Option>
				<Option value="1"		>yes, for all rPi, ignore rPi setting </Option>
				<Option value="-1"		>no, ignore rPi seeting</Option>
			</List>
		</Field>

	<Field id="debugpy3" type="label" alignWithControl="true" fontSize="small" fontColor="darkgrey">  
		<Label>starting with rpi op-sys 11   ONLY PY3 will be used, as py2 is not fully supported anymore </Label>
	</Field>

	<Field id="simpleSeparator57" type="separator"/>

	<Field id="infoLabel97" type="label" fontColor="green" >  <Label>== Debug level on rPi servers; log in  /var/log/pibeacon.log:</Label>  </Field>

	<Field id="infoLabeldebRPI" type="label"> <Label>Debug option ON RPI:</Label>  </Field>

	<Field id="maxSizeOfLogfileOnRPI"   type = "menu"  tooltip="One copy will be kept: pibeacon-1.log; if you use ramdisk, please use less than 21MB"  >
		<Label>Debug...max pibeacon logfile size on RPI:</Label>
		<List>
			<Option value="5000000"  >5MB</Option>
			<Option value="10000000" >10MB</Option>
			<Option value="20000000" >20MB</Option>
			<Option value="30000000" >30MB</Option>
			<Option value="40000000" >40MB</Option>
		</List>
	</Field>
   
	<Field id="debugRPI"   type = "menu"   >
		<Label>Debug...which RPI:</Label>
    	<List class="self" filter="" method="filterPiC" dynamicReload="false"/>
	</Field>

	<Field id="debugRPILabel" type="label" alignWithControl="true" fontSize="small" fontColor="darkgrey">  
		<Label>This will enable verbose debugging --ON the PRI-- not on the indigo server. Use this only while debugging, as this will stress the RPI SSD </Label>
	</Field>


   
	<Field id="infoLabel99" type="label"> <Label>Debug area for plugin:</Label>  </Field>
 
       
	<Field    id="showLoginTest"       type="checkbox"         > <Label> show logging test at startup:</Label>  </Field>
	<Field    id="debugLogic"          type="checkbox"         > <Label> Debug...                   ... (1)  Logic:</Label>  </Field>
	<Field    id="debugDevMgmt"        type="checkbox"         > <Label>     ... (2)  beacon device management:</Label>  </Field>
	<Field    id="debugBeaconData"     type="checkbox"         > <Label>     ... (3)  beacon data:</Label>  </Field>
	<Field    id="debugSensorData"     type="checkbox"         > <Label>     ... (4)  sensor devices:</Label>  </Field>
	<Field    id="debugOutputDevice"   type="checkbox"         > <Label>     ... (5)  output devices:</Label>  </Field>
	<Field    id="debugUpdateRPI"      type="checkbox"         > <Label>     ... (6)  update RPI:</Label>  </Field>
	<Field    id="debugSocketRPI"      type="checkbox"         > <Label>     ... (7)  socket comm indigo to RPI:</Label>  </Field>
	<Field    id="debugStartSocket"    type="checkbox"         > <Label>     ..  (8.0) tcpip socket comm RPI to indigo Setup:</Label>  </Field>
	<Field    id="debugSocket"         type="checkbox"         > <Label>     ..  (8.1) tcpip socket comm RPI to indigo:</Label>  </Field>
	<Field    id="debugOfflineRPI"     type="checkbox"         > <Label>     ... (9)  show error messages if RPI is offline:</Label>  </Field>
	<Field    id="debugBLE"            type="checkbox"         > <Label>     ... (12) BLE-connect:</Label>  </Field>
	<Field    id="debugCAR"            type="checkbox"         > <Label>     ... (13) CAR type devices:</Label>  </Field>
	<Field    id="debugPlotPositions"  type="checkbox"         > <Label>     ..  (15) beacon position plots:</Label>  </Field>
	<Field    id="debugBatteryLevel"   type="checkbox"         > <Label>     ..  (16) battery level for iBeacons:</Label>  </Field>
	<Field    id="debugSQLlogger"      type="checkbox"         > <Label>     ..  (17) SQLlogger:</Label>  </Field>
	<Field    id="debugSQLSuppresslog" type="checkbox"         > <Label>     ..  (18) SQL-Suppress-logger:</Label>  </Field>
	<Field    id="debugBeep"           type="checkbox"         > <Label>     ..  (19) beacon Beep:</Label>  </Field>
	<Field    id="debugUpdateTimeAndZone" type="checkbox"      > <Label>     ..  (20) set time and date on beacon:</Label>  </Field>
	<Field    id="debugGarageDoor"     type="checkbox"         > <Label>     ..  (21) garage door:</Label>  </Field>
	<Field    id="debugDelayedActions" type="checkbox"         > <Label>     ..  (22) delayed actions (for dev):</Label>  </Field>
	<Field    id="debugUpdateIndigo"   type="checkbox"         > <Label>     ... (23) updateIndigo (only for development):</Label>  </Field>
	<Field    id="debugSpecial"        type="checkbox"         > <Label>     ... (S)  special debug (only for development):</Label>  </Field>
	<Field    id="debugall"            type="checkbox"         > <Label>     ... (99) all of the above .. everything:</Label>  </Field>

	<Field id="infoLabel227" type="label"> <Label>DETAILED cpu-time tracking;  set indigo variable "enableTimeTracking_piBeacon"</Label>  </Field>

	<Field    id="do_cProfile" type="textfield"   readonly="yes"     > 
		<Label>... enable or stop or  print intermediate results use on/off/print:</Label>  
	</Field>
	<Field    id="cycleVariables" type="checkbox"         > <Label>recycle pibeacon variables to save sql logger db space:</Label>  </Field>



</PluginConfig>
